{% extends 'base.html' %}

{% block title %}
    Resumen de programacion 
{% endblock %}
{% block navigation %}
    {% if current_user.is_authenticated %}
        <a href="{{url_for('home.index')}}" class="q-icon-costumer">
            <div class="mr-4 w-6 h-6">
                <img src="{{ url_for('static', filename='img/home.svg') }}" alt="qhawariy" srcset="" class="block q-icon-normal">
            </div>
            Inicio
        </a>
        <a href="{{url_for('programacion.agregar_programacion')}}" class="q-link-active q-link-exact-active">
            <div class="mr-4 w-6 h-6">
                <img src="{{ url_for('static', filename='img/schedule_blue.svg') }}" alt="qhawariy" srcset="" class="block q-icon-active">
            </div>
            Programaciones
        </a>
        <a href="{{url_for('estadistica.mostrar_estadisticas')}}" class="q-icon-costumer">
            <div class="mr-4 w-6 h-6">
                <img src="{{ url_for('static', filename='img/statistic.svg') }}" alt="qhawariy" srcset="" class="block q-icon-normal">
            </div>
            Estadisticas
        </a>
    {% endif %}
{% endblock %}
{% block linker %}
<div class="flex">
    <img src="{{url_for('static', filename='img/icon-angle-right.svg')}}" alt="Descargar" class="">
</div>
<a href="{{ url_for('home.index') }}" class="btn--base">
    <p class="text-h3">Inicio</p>
</a>
<div class="flex">
    <img src="{{url_for('static', filename='img/icon-angle-right.svg')}}" alt="Descargar" class="">
</div>
<a href="{{ url_for('programacion.agregar_programacion') }}" class="btn--base">
    <p class="text-h3">Lista de programaciones</p>
</a>
<div class="flex">
    <img src="{{url_for('static', filename='img/icon-angle-right.svg')}}" alt="Descargar" class="">
</div>
<a href="#" class="btn--base">
    <p class="text-h3">Resumen semanal de programaciones</p>
</a>
{% endblock %}
{% block content %}

<div class="flex items-center justify-between pt-2">
    <div class="">
        <p class="text-h5 text-black-100">Resumen semanal
            <span class="text-blue-100 font-semibold">{{fecha_inicio|date_time}} - {{fecha_fin|date_time}}</span>
        </p>
    </div>
    <div class="flex flex-col items-center justify-center right-0">
        <form action="" method="post" novalidate>
            {{form.hidden_tag()}}
            <div class="flex items-center">
                <div class="flex justify-center items-center relative">
                    <div class=" inline-flex translateY-[-50%] right-unset left-3 absolute top-[50%]">
                        <img src="{{ url_for('static', filename='img/icon-len.svg') }}" height="24px" width="24px" alt>
                    </div>
                    {{ form.fecha(class="h-[42px] rounded-full border border-gray-112 w-full pr-2 pl-12 text-gris-900",type="date", placeholder="Fecha y hora", autocomplete="on") }}<br>
                    <div class="ml-2">
                        {{ form.submit(class="btn btn--base btn-blue-600 w-full md:w-auto block text-center") }}
                    </div>
                </div>
            </div>
            <div class="mt-3">
                {% for error in form.fecha.errors %}
                <span class="text-red-600 text-xs">{{ error }}</span>
                {% endfor %}
            </div>
        </form>
    </div>
</div>
<div class="flex items-center justify-between py-2 border-b border-cream-100">
    <a href="{{ url_for('programacion.descargar_resumen',name=filename)}}" class="btn btn--base btn-blue-100">
        <div class="flex justify-center items-center">
            <img src="{{url_for('static', filename='img/download.svg')}}" alt="Descargar" class="">
            <p class="ml-2 text-xs sm:hidden">Descargar</p>
        </div>
    </a>
</div>
<div class="grid grid-cols-1 pt-2 gap-y-4 h-full flex justify-center">
    <!-- Lista de DataFrame por ruta -->
    {% for i in df %}
    {% for key,value in i.items() %}
    <div class="flex flex-col justify-center">
        <div class="flex items-center pb-2">
            <p class="">Programacion
                <span class="text-body-2 text-blue-600 font-semibold">{{key}}</span>
            </p>
        </div>
        <div class="grid gap-0 grid-cols-8 text-body-3 flex justify-center border border-cream-100 bg-gray-250">
            <div class="flex items-center justify-center py-2 bg-white border-b border-cream-100">
                <p class="text-body-3 uppercase sm:text-body-4">Horario</p>
            </div>
            {% for row in value %}
            <div class="flex items-center justify-center py-2 bg-white border-b border-cream-100">
                <p class="text-body-3 uppercase text-center sm:text-body-4">{{row}}</p>
            </div>
            {% endfor %}
            {% for index, row in value.iterrows() %}
            <div class="flex items-center justify-center border-b border-cream-100 py-2">
                <p class="text-body-3 uppercase">{{index|time("HM")}}</p>
            </div>
            {% for col in row %}
            {% if col != '' %}
            <div class="flex items-center justify-center border-b border-cream-100 py-2">
                <p class="text-body-3">{{col}}</p>
            </div>
            {% else %}
            <div class="flex items-center justify-center border-b border-cream-100 py-2">
                <p class="text-body-3"></p>
            </div>
            {% endif %}
            {% endfor %}
            {% endfor %}
        </div>
    </div>
    {% endfor %}
    {% endfor %}
</div>
{% endblock %}